(function(m,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(m=typeof globalThis<"u"?globalThis:m||self,f(m["hpc-components"]={}))})(this,function(m){"use strict";var Pt=Object.defineProperty;var Tt=(m,f,w)=>f in m?Pt(m,f,{enumerable:!0,configurable:!0,writable:!0,value:w}):m[f]=w;var b=(m,f,w)=>(Tt(m,typeof f!="symbol"?f+"":f,w),w);function f(){}function w(e){return e()}function H(){return Object.create(null)}function A(e){e.forEach(w)}function J(e){return typeof e=="function"}function D(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function st(e){return Object.keys(e).length===0}function ot(e,...t){if(e==null){for(const s of t)s(void 0);return f}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function it(e,t,n){e.$$.on_destroy.push(ot(t,n))}function p(e,t){e.appendChild(t)}function rt(e,t,n){const s=ct(e);if(!s.getElementById(t)){const i=j("style");i.id=t,i.textContent=n,ut(s,i)}}function ct(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ut(e,t){return p(e.head||e,t),t.sheet}function L(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function lt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function j(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function P(){return v(" ")}function ft(){return v("")}function U(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function at(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function dt(e){return Array.from(e.childNodes)}function B(e,t){t=""+t,e.data!==t&&(e.data=t)}function Y(e,t){e.value=t??""}function ht(e){const t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}let C;function N(e){C=e}function $t(){if(!C)throw new Error("Function called outside component initialization");return C}function pt(e){$t().$$.on_mount.push(e)}const q=[],F=[];let E=[];const V=[],mt=Promise.resolve();let M=!1;function bt(){M||(M=!0,mt.then(W))}function I(e){E.push(e)}const R=new Set;let k=0;function W(){if(k!==0)return;const e=C;do{try{for(;k<q.length;){const t=q[k];k++,N(t),_t(t.$$)}}catch(t){throw q.length=0,k=0,t}for(N(null),q.length=0,k=0;F.length;)F.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];R.has(n)||(R.add(n),n())}E.length=0}while(q.length);for(;V.length;)V.pop()();M=!1,R.clear(),N(e)}function _t(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}function gt(e){const t=[],n=[];E.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),E=t}const yt=new Set;function wt(e,t){e&&e.i&&(yt.delete(e),e.i(t))}function K(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function jt(e,t,n){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),I(()=>{const o=e.$$.on_mount.map(w).filter(J);e.$$.on_destroy?e.$$.on_destroy.push(...o):A(o),e.$$.on_mount=[]}),i.forEach(I)}function xt(e,t){const n=e.$$;n.fragment!==null&&(gt(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(e,t){e.$$.dirty[0]===-1&&(q.push(e),bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qt(e,t,n,s,i,o,c=null,r=[-1]){const l=C;N(e);const u=e.$$={fragment:null,ctx:[],props:o,update:f,not_equal:i,bound:H(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:H(),dirty:r,skip_bound:!1,root:t.target||l.$$.root};c&&c(u.root);let _=!1;if(u.ctx=n?n(e,t.props||{},(a,x,...y)=>{const h=y.length?y[0]:x;return u.ctx&&i(u.ctx[a],u.ctx[a]=h)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](h),_&&vt(e,a)),x}):[],u.update(),_=!0,A(u.before_update),u.fragment=s?s(u.ctx):!1,t.target){if(t.hydrate){const a=dt(t.target);u.fragment&&u.fragment.l(a),a.forEach(z)}else u.fragment&&u.fragment.c();t.intro&&wt(e.$$.fragment),jt(e,t.target,t.anchor),W()}N(l)}let G;typeof HTMLElement=="function"&&(G=class extends HTMLElement{constructor(t,n,s){super();b(this,"$$ctor");b(this,"$$s");b(this,"$$c");b(this,"$$cn",!1);b(this,"$$d",{});b(this,"$$r",!1);b(this,"$$p_d",{});b(this,"$$l",{});b(this,"$$l_u",new Map);this.$$ctor=t,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(t,n,s){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){const i=this.$$c.$on(t,n);this.$$l_u.set(n,i)}super.addEventListener(t,n,s)}removeEventListener(t,n,s){if(super.removeEventListener(t,n,s),this.$$c){const i=this.$$l_u.get(n);i&&(i(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return()=>{let c;return{c:function(){c=j("slot"),o!=="default"&&g(c,"name",o)},m:function(u,_){L(u,c,_)},d:function(u){u&&z(c)}}}};if(await Promise.resolve(),!this.$$cn)return;const n={},s=ht(this);for(const o of this.$$s)o in s&&(n[o]=[t(o)]);for(const o of this.attributes){const c=this.$$g_p(o.name);c in this.$$d||(this.$$d[c]=T(c,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const i=()=>{this.$$r=!0;for(const o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){const c=T(o,this.$$d[o],this.$$p_d,"toAttribute");c==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,c)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(const o in this.$$l)for(const c of this.$$l[o]){const r=this.$$c.$on(o,c);this.$$l_u.set(c,r)}this.$$l={}}}attributeChangedCallback(t,n,s){var i;this.$$r||(t=this.$$g_p(t),this.$$d[t]=T(t,s,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function T(e,t,n,s){var o;const i=(o=n[e])==null?void 0:o.type;if(t=i==="Boolean"&&typeof t!="boolean"?t!=null:t,!s||!n[e])return t;if(s==="toAttribute")switch(i){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(i){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function Et(e,t,n,s,i,o){let c=class extends G{constructor(){super(e,n,i),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map(r=>(t[r].attribute||r).toLowerCase())}};return Object.keys(t).forEach(r=>{Object.defineProperty(c.prototype,r,{get(){return this.$$c&&r in this.$$c?this.$$c[r]:this.$$d[r]},set(l){var u;l=T(r,l,t),this.$$d[r]=l,(u=this.$$c)==null||u.$set({[r]:l})}})}),s.forEach(r=>{Object.defineProperty(c.prototype,r,{get(){var l;return(l=this.$$c)==null?void 0:l[r]}})}),o&&(c=o(c)),e.element=c,c}class kt{constructor(){b(this,"$$");b(this,"$$set")}$destroy(){xt(this,1),this.$destroy=f}$on(t,n){if(!J(n))return f;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!st(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ot);const O=[];function St(e,t=f){let n;const s=new Set;function i(r){if(D(e,r)&&(e=r,n)){const l=!O.length;for(const u of s)u[1](),O.push(u,e);if(l){for(let u=0;u<O.length;u+=2)O[u][0](O[u+1]);O.length=0}}}function o(r){i(r(e))}function c(r,l=f){const u=[r,l];return s.add(u),s.size===1&&(n=t(i,o)||f),r(e),()=>{s.delete(u),s.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:c}}function At(){const{subscribe:e,set:t}=St(window.location);return window.addEventListener("popstate",()=>t(window.location)),{subscribe:e}}const zt=At();function Ct(e){rt(e,"svelte-1qjvzjq",".mb-10.svelte-1qjvzjq{margin-bottom:10px}.text-bold.svelte-1qjvzjq{font-weight:700}.mt-10.svelte-1qjvzjq{margin-top:10px}.text-small.svelte-1qjvzjq{font-size:80%}.text.svelte-1qjvzjq{display:block;border-radius:10px;font-size:120%;padding:8px 8px;width:100%}.chat-bot.svelte-1qjvzjq{min-width:25%;border:1px solid grey;border-radius:5px;position:absolute;bottom:10px;right:10px;padding:10px 10px;display:flex;flex-direction:column;align-items:stretch}")}function Q(e,t,n){const s=e.slice();return s[8]=t[n],s}function X(e){let t,n=e[3][e[8].role]+"",s,i,o=e[8].content+"",c;return{c(){t=j("div"),s=v(n),i=P(),c=v(o),g(t,"class","message")},m(r,l){L(r,t,l),p(t,s),p(t,i),p(t,c)},p(r,l){l&1&&n!==(n=r[3][r[8].role]+"")&&B(s,n),l&1&&o!==(o=r[8].content+"")&&B(c,o)},d(r){r&&z(t)}}}function Z(e){let t,n=e[8].role!="system"&&X(e);return{c(){n&&n.c(),t=ft()},m(s,i){n&&n.m(s,i),L(s,t,i)},p(s,i){s[8].role!="system"?n?n.p(s,i):(n=X(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(s){s&&z(t),n&&n.d(s)}}}function Nt(e){let t,n,s,i,o,c,r,l,u,_,a,x,y=K(e[0]),h=[];for(let d=0;d<y.length;d+=1)h[d]=Z(Q(e,y,d));return{c(){t=j("content"),n=j("div"),s=v("ðŸ¤– HPC AI Assistant "),i=v(e[1]),o=P();for(let d=0;d<h.length;d+=1)h[d].c();c=P(),r=j("form"),l=j("input"),u=P(),_=j("div"),_.textContent="The assistant makes mistakes, always check important information",g(n,"class","mb-10 text-bold svelte-1qjvzjq"),g(l,"class","text svelte-1qjvzjq"),g(l,"type","text"),g(l,"placeholder","What do you want help with?"),g(r,"action","#"),g(_,"class","mt-10 text-small svelte-1qjvzjq"),g(t,"class","chat-bot svelte-1qjvzjq")},m(d,S){L(d,t,S),p(t,n),p(n,s),p(n,i),p(t,o);for(let $=0;$<h.length;$+=1)h[$]&&h[$].m(t,null);p(t,c),p(t,r),p(r,l),Y(l,e[2]),p(t,u),p(t,_),a||(x=[U(l,"input",e[6]),U(r,"submit",at(e[4]))],a=!0)},p(d,[S]){if(S&2&&B(i,d[1]),S&9){y=K(d[0]);let $;for($=0;$<y.length;$+=1){const nt=Q(d,y,$);h[$]?h[$].p(nt,S):(h[$]=Z(nt),h[$].c(),h[$].m(t,c))}for(;$<h.length;$+=1)h[$].d(1);h.length=y.length}S&4&&l.value!==d[2]&&Y(l,d[2])},i:f,o:f,d(d){d&&z(t),lt(h,d),a=!1,A(x)}}}const tt="stablelm2:1.6b-zephyr-q3_K_L";function Lt(e,t,n){let s;it(e,zt,a=>n(5,s=a));let i,o=[{role:"system",content:"You are LucIAno, an helpful AI assistant, expert in High Performance Computing, Linux System Administration, and Python and FORTRAN programming. You always answer to users very precisely and to-the-point, helping them to clarify their question when they are vaguely expressed. You politely refuse to answer questions not related to your expertise area. Write output in Markdown."}],c="ðŸŸ¡",r;const l={user:"ðŸ‘¤",assistant:"ðŸ¤–"};pt(async()=>{const a=await fetch(`${i}/api/generate`,{method:"POST",body:JSON.stringify({model:tt})});n(1,c=a.status===200?"ðŸŸ¢":"ðŸ”´")});async function u(){n(0,o=[...o,{role:"user",content:r}]),n(2,r=""),n(1,c="ðŸ”µ");const a=await fetch(`${i}/api/chat`,{method:"POST",body:JSON.stringify({model:tt,messages:o,stream:!1})});if(a.status===200){const x=await a.json();n(1,c="ðŸŸ¢"),n(0,o=[...o,x.message])}else n(1,c="ðŸ”´")}function _(){r=this.value,n(2,r)}return e.$$.update=()=>{e.$$.dirty&32&&(i=`${s.protocol}//${s.hostname}:11434`)},[o,c,r,l,u,s,_]}class et extends kt{constructor(t){super(),qt(this,t,Lt,Nt,D,{},Ct)}}customElements.define("hpc-chatbot",Et(et,{},[],[],!0)),m.ChatBot=et,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=components.umd.cjs.map
